<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
            闭包分为两种:无效闭包和有效闭包
            闭包的数据类型:对象
            1.如何产生闭包
                内部函数使用到外部函数的变量
            2.什么时候产生闭包
                内部函数执行函数定义的时候产生
            3.闭包的好处
                延长局部变量的生命周期
                让外部可以操作到函数内部的变量
            4.闭包的坏处
                延长变量的生命周期,会导致内存泄漏
                内存泄漏过多,导致内存溢出
            5.如何解决闭包的副作用
                减少使用闭包
                使用完后,及时释放闭包,让垃圾回收机制回收
                    将使用闭包的函数释放,也就是清除对该函数的引用
                    闭包存活的原因:
                        1.内部函数身上具有Scopes属性,正在引用外部的变量对象,导致只要内部函数不被销毁,被引用的变量对象也不会被销毁
                        2.内部函数通过返回值返回到外层,外层的变量接受,只要该变量的值不发生变化,内部函数不会被销毁
            6.什么是闭包
                意外存活的变量对象


            执行上下文
                分为两部分
                    运行当前函数所需要的内存空间
                    收集当前函数内部所有的变量(变量对象)
                创建时机
                    调用函数的时候会产生
                销毁时机
                    函数执行结束销毁
        */
        function A(){
            var a = 2;
            function B(){
                a++;
                console.log('B',a)
            }
            function C(){
                a+=2;
                console.log('C',a)
            }
            console.log(B,C)
            return 123;
            // return {
            //     B,
            //     C
            // };
        }

        var {B,C} = A();
        // B();//3
        // B();//4
        // C();//4
        // C();//6

        B();//3
        B();//4
        C();//6
        C();//8


        // B=null;

        // var a= {};
        // a=1;
    </script>
</body>
</html>